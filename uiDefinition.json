{
	"$schema": "https://schema.management.azure.com/schemas/2021-09-09/uiFormDefinition.schema.json",
	"view": {
		"kind": "Form",
		"properties": {
			"title": "Deploy AVD HostPool from Azure Compute Gallery Image",
			"steps": [
				{
					"name": "basics",
					"label": "Basics",
					"elements": [
						{
							"name": "resourceScope",
							"type": "Microsoft.Common.ResourceScope",
							"location": {
								"resourceTypes": []
							}
						},
						{
							"name": "storageBlobSelection",
							"type": "Microsoft.Storage.StorageBlobSelector",
							"visible": true,
							"toolTip": "This should be the solution provided Register-HostPool-PostConfig script and in the location you have previously uploaded it to.",
							"label": "Solution provided Register-HostPool-PostConfig.ps1",
							"options": {
								"text": "Select Register-HostPool-PostConfig.ps1"
							},
							"constraints": {
								"allowedFileExtensions": [
									"ps1"
								]
							}
						},
                        {
							"name": "automationAccountNewExisting",
							"type": "Microsoft.Common.DropDown",
							"label": "New or Existing Automation Account?",
							"defaultValue": "Existing",
							"toolTip": "",
							"constraints": {
								"allowedValues": [
									{
										"label": "New",
										"value": "New"
									},
									{
										"label": "Existing",
										"value": "Existing"
									}
								],
								"required": true
							},
							"visible": true
						},
						{
							"name": "automationAccountSelection",
							"type": "Microsoft.Solutions.ResourceSelector",
							"visible": "[if(equals(steps('basics').automationAccountNewExisting, 'Existing'), true, false)]",
							"label": "Automation Account",
							"resourceType": "Microsoft.Automation/AutomationAccounts",
							"options": {
								"filter": {
									"subscription": "onBasics",
									"location": "onBasics"
								}
							}
						},
						{
							"name": "AutomationAccountName",
							"type": "Microsoft.Common.TextBox",
							"label": "Automation Account Name",
							"defaultValue": "aa-AVDAutoDeploy",
							"toolTip": "",
							"placeholder": "aa-AVDAutoDeploy",
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": ""
							},
							"visible": "[if(equals(steps('basics').automationAccountNewExisting, 'New'), true, false)]"
						},
						{
							"name": "Tags",
							"type": "Microsoft.Common.TagsByResource",
							"resources": [
								"Microsoft.Storage/storageAccounts",
								"Microsoft.Compute/virtualMachines",
								"Microsoft.Network/networkInterfaces",
								"Microsoft.Resources/resourceGroups",
								"Microsoft.Automation/automationAccounts",
								"Microsoft.Compute/availabilitySets",
								"Microsoft.DesktopVirtualization/hostPools",
								"Microsoft.DesktopVirtualization/applicationGroups",
								"Microsoft.DesktopVirtualization/workspaces",
								"Microsoft.OperationalInsights/workspaces",
								"Microsoft.Insights/diagnosticSettings"
							]
						},
						{
							"name": "Timestamp",
							"type": "Microsoft.Common.TextBox",
							"label": "Timestamp",
							"defaultValue": "[[utcNow('u')]",
							"toolTip": "",
							"constraints": {
								"required": false,
								"regex": "",
								"validationMessage": ""
							},
							"visible": false
						}
					]
				},
				{
					"name": "hostPool",
					"label": "Host Pool",
					"elements": [
						{
							"name": "hostPoolType",
							"type": "Microsoft.Common.OptionsGroup",
							"label": "Host Pool Type",
							"defaultValue": "Pooled",
							"toolTip": "",
							"constraints": {
								"allowedValues": [
									{
										"label": "Pooled",
										"value": "Pooled"
									},
									{
										"label": "Personal / Persistent",
										"value": "Personal"
									}
								],
								"required": true
							},
							"visible": true
						},
						{
							"name": "hostPoolPooled",
							"type": "Microsoft.Common.Section",
							"label": "Pooled Configuration",
							"elements": [
								{
									"name": "HostPoolBalance",
									"type": "Microsoft.Common.DropDown",
									"label": "Choose balance option",
									"defaultValue": "Depth First",
									"toolTip": "",
									"constraints": {
										"allowedValues": [
											{
												"label": "Depth First",
												"value": "DepthFirst"
											},
											{
												"label": "Breadth First",
												"value": "BreadthFirst"
											}
										],
										"required": true
									},
									"visible": true
								},
								{
									"name": "AppGroupType",
									"type": "Microsoft.Common.DropDown",
									"label": "App Group Type",
									"defaultValue": " ",
									"toolTip": "",
									"constraints": {
										"required": true,
										"allowedValues": [
											{
												"label": "Full Desktop",
												"value": "Desktop"
											},
											{
												"label": "Remote Apps",
												"value": "RailApplications"
											}
										]
									},
									"visible": true
								},
								{
									"name": "NumUsersPerHost",
									"type": "Microsoft.Common.Slider",
									"min": 1,
									"max": 30,
									"label": "Number of Users Per Host",
									"sublabel": "Users",
									"defaultValue": 2,
									"showStepMarkers": false,
									"toolTip": "",
									"placeholder": 2,
									"constraints": {
										"required": true
									},
									"visible": true
								}
							],
							"visible": "[if(equals(steps('hostPool').hostPoolType, 'Pooled'), true, false)]"
						},
						{
							"name": "hostPoolPersonal",
							"type": "Microsoft.Common.Section",
							"label": "Personal Configuration",
							"elements": [
								{
									"name": "PersonalAssignment",
									"type": "Microsoft.Common.DropDown",
									"label": "Choose assignment option",
									"defaultValue": "Automatic",
									"toolTip": "",
									"constraints": {
										"allowedValues": [
											{
												"label": "Automatic",
												"value": "Automatic"
											},
											{
												"label": "Manually Assign",
												"value": "Direct"
											}
										],
										"required": true
									},
									"visible": true
								}
							],
							"visible": "[if(equals(steps('hostPool').hostPoolType, 'Personal'), true, false)]"
						},
						{
							"name": "HostPoolName",
							"type": "Microsoft.Common.TextBox",
							"label": "Host Pool Name",
							"defaultValue": "",
							"toolTip": "",
							"placeholder": "hp-",
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": ""
							},
							"visible": true
						},
						{
							"name": "NumSessionHosts",
							"type": "Microsoft.Common.TextBox",
							"label": "Session Hosts",
							"defaultValue": "",
							"toolTip": "",
							"placeholder": 2,
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": ""
							},
							"visible": true
						},
						{
							"name": "ValidationEnvironment",
							"type": "Microsoft.Common.CheckBox",
							"label": "Validation Environment",
							"defaultValue": false,
							"toolTip": "The value determines whether the hostpool should receive early AVD updates for testing.",
							"constraints": {
								"required": false,
								"validationMessage": "This should be set for test and development environments."
							},
							"visible": true
						},
						{
							"name": "WorkspaceName",
							"type": "Microsoft.Common.TextBox",
							"label": "Workspace Name",
							"defaultValue": "",
							"toolTip": "",
							"placeholder": "ws-",
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": ""
							},
							"visible": true
						},
						{
							"name": "AppGroupName",
							"type": "Microsoft.Common.TextBox",
							"label": "App Group Name",
							"defaultValue": "",
							"toolTip": "",
							"placeholder": "appgrp-",
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": ""
							},
							"visible": true
						},
						{
							"name": "Availability",
							"type": "Microsoft.Common.DropDown",
							"label": "Availability",
							"defaultValue": "None",
							"toolTip": "Set the desired availability / SLA with a pooled host pool.  Choose \"None\" if deploying a personal host pool.",
							"placeholder": "None",
							"constraints": {
								"required": true,
								"allowedValues": [
									{
										"label": "Availability Set",
										"value": "AvailabilitySet"
									},
									{
										"label": "Availability Zones",
										"value": "AvailabilityZones"
									},
									{
										"label": "None",
										"value": "None"
									}
								]
							},
							"visible": true
						},
						{
							"name": "CustomRdpProperty",
							"type": "Microsoft.Common.TextBox",
							"label": "Custom RDP Property",
							"defaultValue": "audiocapturemode:i:1;camerastoredirect:s:*;use multimon:i:0;drivestoredirect:s:;",
							"toolTip": "",
							"placeholder": "audiocapturemode:i:1;camerastoredirect:s:*;use multimon:i:0;drivestoredirect:s:;",
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": ""
							},
							"visible": true
						},
						{
							"name": "ResourceGroupHP",
							"type": "Microsoft.Common.TextBox",
							"label": "Resource group",
							"toolTip": "Input a custom name for the shared services resource group.",
							"placeholder": "Example: rg-avd-shared-services",
							"constraints": {
								"required": true,
								"regex": "^(?!.*[\\.]$)[a-zA-Z0-9_\\.()-]{1,90}$",
								"validationMessage": "The value must be alphanumerics, underscores, hyphens, periods, and parentheses. The value must not end with a period. The length must be 1 to 90 characters."
							}
						},
						{
							"name": "StartVmOnConnect",
							"type": "Microsoft.Common.CheckBox",
							"label": "Start Vm On Connect",
							"defaultValue": true,
							"toolTip": "Enables ability for VM to start if VMs are turned off but deployed to the host pool.",
							"constraints": {
								"required": true,
								"validationMessage": "Ideally you'd enable this for multisession when you have Scaling Plans or Personal Desktops in which VMs may be powered down."
							},
							"visible": true
						},
						{
							"name": "CrossTenantRegister",
							"type": "Microsoft.Common.DropDown",
							"label": "Cross Tenant Register",
							"defaultValue": " ",
							"toolTip": "If TRUE, Resource Group for Host Pool resources not required.",
							"constraints": {
								"required": true,
								"allowedValues": [
									{
										"label": "true",
										"value": true
									},
									{
										"label": "false",
										"value": false
									}
								]
							},
							"visible": false
						},
						{
							"name": "CrossTenantRegisterToken",
							"type": "Microsoft.Common.PasswordBox",
							"label": {
								"password": "Cross Tenant Register Token",
								"confirmPassword": "Confirm password"
							},
							"toolTip": "",
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": ""
							},
							"options": {
								"hideConfirmation": true
							},
							"visible": false
						}
					]
				},
				{
					"name": "monitoring",
					"label": "Monitoring",
					"type": "Microsoft.Common.Section",
					"visible": true,
					"elements": [
						{
							"name": "deployMonitoring",
							"type": "Microsoft.Common.OptionsGroup",
							"visible": true,
							"label": "Deploy monitoring",
							"defaultValue": "No",
							"toolTip": "Deploy monitoring settings and if selected deploy Azure log analytics workspace.",
							"constraints": {
								"required": true,
								"allowedValues": [
									{
										"label": "Yes",
										"value": true
									},
									{
										"label": "No",
										"value": false
									}
								]
							}
						},
						{
							"name": "deployMonitoringInfo1",
							"type": "Microsoft.Common.InfoBox",
							"visible": "[equals(steps('monitoring').deployMonitoring, true)]",
							"options": {
								"text": "Azure Virtual Desktop monitoring requires an existing Azure Log Analytics Workspace or the creation of a new one.",
								"uri": "https://docs.microsoft.com/azure/virtual-desktop/azure-monitor",
								"style": "Info"
							}
						},
						{
							"name": "deployMonitoringAlaWorkspace",
							"type": "Microsoft.Common.OptionsGroup",
							"visible": "[equals(steps('monitoring').deployMonitoring, true)]",
							"label": "Log analytics workspace",
							"defaultValue": "Existing",
							"toolTip": "Deploy monitoring settings and if selected deploy Azure log analytics workspace.",
							"constraints": {
								"required": true,
								"allowedValues": [
									{
										"label": "Existing",
										"value": false
									},
									{
										"label": "New",
										"value": true
									}
								]
							}
						},
						{
							"name": "logAnalyticsWorkspaceName",
							"type": "Microsoft.Common.TextBox",
							"visible": "[equals(steps('monitoring').deployMonitoringAlaWorkspace, true)]",
							"label": "Log Analytics Workspace Name",
							"toolTip": "This will be deployed in the Resource Group selected for the AVD Host Pool Management resources.",
							"defaultValue": "la-<region>-AVD",
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": "Value must be alphanumeric with dashes and underscores only."
							}
						},
						{
							"name": "deployMonitoringNewAlaWorkspaceRetention",
							"type": "Microsoft.Common.TextBox",
							"visible": "[equals(steps('monitoring').deployMonitoringAlaWorkspace, true)]",
							"label": "Retention policy (Days)",
							"toolTip": "Number of days data will be retained in the workspace.",
							"defaultValue": 90,
							"constraints": {
								"required": true,
								"regex": "^[a-z0-9A-Z-]{1,90}$",
								"validationMessage": "Value must be 1-90 characters."
							}
						},
						{
							"name": "alaWorkspaceExistingWorkspacesSelection",
							"type": "Microsoft.Solutions.ResourceSelector",
							"visible": "[equals(steps('monitoring').deployMonitoringAlaWorkspace, false)]",
							"label": "Existing workspace",
							"resourceType": "Microsoft.OperationalInsights/workspaces",
							"constraints": {
								"required": true
							}
						},
						{
							"name": "deployMonitoringInfo2",
							"type": "Microsoft.Common.InfoBox",
							"visible": "[equals(steps('monitoring').deployMonitoring, true)]",
							"options": {
								"text": "Deployment will configured all required settings to use the AVD insights workbook.",
								"uri": "https://learn.microsoft.com/azure/virtual-desktop/azure-monitor?WT.mc_id=Portal-AppInsightsExtension",
								"style": "Info"
							}
						},
						{
							"name": "LogAnalyticsWorkspaceSku",
							"type": "Microsoft.Common.DropDown",
							"label": "Log Analytics Workspace Sku",
							"defaultValue": "PerGB2018",
							"toolTip": "The SKU for the Log Analytics Workspace to setup the AVD Monitoring solution",
							"constraints": {
								"required": false,
								"allowedValues": [
									{
										"label": "Free",
										"value": "Free"
									},
									{
										"label": "Standard",
										"value": "Standard"
									},
									{
										"label": "Premium",
										"value": "Premium"
									},
									{
										"label": "PerNode",
										"value": "PerNode"
									},
									{
										"label": "PerGB2018",
										"value": "PerGB2018"
									},
									{
										"label": "Standalone",
										"value": "Standalone"
									},
									{
										"label": "CapacityReservation",
										"value": "CapacityReservation"
									}
								]
							},
							"visible": false
						}
					]
				},
				{
					"name": "hostInfo",
					"label": "HostInformation",
					"elements": [
						{
							"name": "UpdateWindows",
							"type": "Microsoft.Common.DropDown",
							"label": "Update Windows Post Deployment",
							"defaultValue": " ",
							"toolTip": "",
							"constraints": {
								"required": true,
								"allowedValues": [
									{
										"label": "Yes",
										"value": true
									},
									{
										"label": "No",
										"value": false
									}
								]
							},
							"visible": true
						},
						{
							"name": "DomainName",
							"type": "Microsoft.Common.TextBox",
							"label": "Domain Name",
							"defaultValue": "",
							"toolTip": "",
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": ""
							},
							"visible": true
						},
						{
							"name": "DomainUser",
							"type": "Microsoft.Common.TextBox",
							"label": "Domain User",
							"defaultValue": "",
							"toolTip": "",
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": ""
							},
							"visible": true
						},
						{
							"name": "DomainPassword",
							"type": "Microsoft.Common.PasswordBox",
							"label": {
								"password": "Domain Password",
								"confirmPassword": "Confirm password"
							},
							"toolTip": "",
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": ""
							},
							"options": {
								"hideConfirmation": true
							},
							"visible": true
						},
						{
							"name": "OUPath",
							"type": "Microsoft.Common.TextBox",
							"label": "OU Path",
							"defaultValue": "",
							"toolTip": "",
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": ""
							},
							"visible": true
						},
						{
							"name": "VmIndexStart",
							"type": "Microsoft.Common.TextBox",
							"label": "Vm Index Start",
							"defaultValue": "",
							"toolTip": "",
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": ""
							},
							"visible": true
						},
						{
							"name": "ResourceGroupVMs",
							"type": "Microsoft.Common.TextBox",
							"label": "Resource Group V Ms",
							"defaultValue": "",
							"toolTip": "",
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": ""
							},
							"visible": true
						},
						{
							"name": "VmPrefix",
							"type": "Microsoft.Common.TextBox",
							"label": "Vm Prefix",
							"defaultValue": "",
							"toolTip": "",
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": ""
							},
							"visible": true
						},
						{
							"name": "DiskSku",
							"type": "Microsoft.Common.DropDown",
							"label": "Disk Sku",
							"defaultValue": "Standard_LRS",
							"toolTip": "The storage SKU for the AVD session host disks.  Production deployments should use Premium_LRS.",
							"constraints": {
								"required": false,
								"allowedValues": [
									{
										"label": "Standard_LRS",
										"value": "Standard_LRS"
									},
									{
										"label": "StandardSSD_LRS",
										"value": "StandardSSD_LRS"
									},
									{
										"label": "Premium_LRS",
										"value": "Premium_LRS"
									}
								]
							},
							"visible": true
						},
						{
							"name": "VmPassword",
							"type": "Microsoft.Common.PasswordBox",
							"label": {
								"password": "Vm Password",
								"confirmPassword": "Confirm password"
							},
							"toolTip": "Local administrator password for the AVD session hosts",
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": ""
							},
							"options": {
								"hideConfirmation": true
							},
							"visible": true
						},
						{
							"name": "VmSize",
							"type": "Microsoft.Common.TextBox",
							"label": "Vm Size",
							"defaultValue": "Standard_D4s_v4",
							"toolTip": "The VM SKU for the AVD session hosts.",
							"constraints": {
								"required": false,
								"regex": "",
								"validationMessage": ""
							},
							"visible": true
						},
						{
							"name": "VmUsername",
							"type": "Microsoft.Common.TextBox",
							"label": "Vm Username",
							"defaultValue": "",
							"toolTip": "The Local Administrator Username for the Session Hosts",
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": ""
							},
							"visible": true
						},
						{
							"name": "OUPath",
							"type": "Microsoft.Common.TextBox",
							"label": "OU Path",
							"defaultValue": "",
							"toolTip": "",
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": ""
							},
							"visible": true
						}
					]
				},
				{
					"name": "networking",
					"label": "Virtual Networking",
					"elements": [
						{
							"name": "virtualNetworkSelection",
							"type": "Microsoft.Solutions.ResourceSelector",
							"visible": true,
							"label": "Virtual network",
							"resourceType": "Microsoft.Network/virtualNetworks",
							"options": {
								"filter": {
									"subscription": "onBasics",
									"location": "onBasics"
								}
							}
						},
						{
							"name": "subnetsApi",
							"type": "Microsoft.Solutions.ArmApiControl",
							"request": {
								"method": "GET",
								"path": "[concat(steps('networking').virtualNetworkSelection.id, '/subnets?api-version=2022-05-01')]"
							}
						},
						{
							"name": "subnet",
							"type": "Microsoft.Common.DropDown",
							"visible": true,
							"label": "Subnet",
							"defaultValue": "",
							"toolTip": "Select an existing subnet for AIB build virtual machines. This enables the use of Private Link and prevents the deployment of public IP addresses.",
							"constraints": {
								"allowedValues": "[map(steps('networking').subnetsApi.value, (item) => parse(concat('{\"label\":\"', item.name, '\",\"value\":\"', item.name, '\"}')))]"
							}
						}
					]
				},
				{
					"name": "imageInfo",
					"label": "ImageInformation",
					"elements": [
						{
							"name": "ComputeGalleryName",
							"type": "Microsoft.Common.TextBox",
							"label": "Compute Gallery Name",
							"defaultValue": "",
							"toolTip": "",
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": ""
							},
							"visible": true
						},
						{
							"name": "ComputeGallerySubId",
							"type": "Microsoft.Common.TextBox",
							"label": "Compute Gallery Sub Id",
							"defaultValue": "",
							"toolTip": "",
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": ""
							},
							"visible": true
						},
						{
							"name": "ComputeGalleryRG",
							"type": "Microsoft.Common.TextBox",
							"label": "Compute Gallery RG",
							"defaultValue": "",
							"toolTip": "",
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": ""
							},
							"visible": true
						},
						{
							"name": "ComputeGalleryImage",
							"type": "Microsoft.Common.TextBox",
							"label": "Compute Gallery Image",
							"defaultValue": "",
							"toolTip": "",
							"constraints": {
								"required": true,
								"regex": "",
								"validationMessage": ""
							},
							"visible": true
						}
					]
				}
			]
		},
		"outputs": {
			"parameters": {
				"_scriptRegisterPostConfig": "[steps('basics').storageBlobSelection]",
				"AppGroupName": "[steps('hostPool').AppGroupName]",
				"AppGroupType": "[steps('hostPool').hostPoolPooled.AppGroupType]",
				"AutomationAccountName": "[if(equals(steps('basics').automationAccountNewExisting, 'New'), steps('basics').automationAccountSelection.Name, steps('basics').AutomationAccountName)]",
				"Availability": "[steps('hostPool').Availability]",
				"ComputeGalleryName": "[steps('imageInfo').ComputeGalleryName]",
				"ComputeGallerySubId": "[steps('imageInfo').ComputeGallerySubId]",
				"ComputeGalleryRG": "[steps('imageInfo').ComputeGalleryRG]",
				"ComputeGalleryImage": "[steps('imageInfo').ComputeGalleryImage]",
				"CrossTenantRegister": "[steps('hostPool').CrossTenantRegister]",
				"CrossTenantRegisterToken": "[steps('hostPool').CrossTenantRegisterToken]",
				"CustomRdpProperty": "[steps('hostPool').CustomRdpProperty]",
				"DiskSku": "[steps('hostInfo').DiskSku]",
				"DomainName": "[steps('hostInfo').DomainName]",
				"DomainUser": "[steps('hostInfo').DomainUser]",
				"DomainPassword": "[steps('hostInfo').DomainPassword]",
				"ResourceGroupHP": "[steps('hostPool').ResourceGroupHP]",
				"HostPoolName": "[steps('hostPool').HostPoolName]",
				"ResourceGroupVMs": "[steps('hostInfo').ResourceGroupVMs]",
				"HostPoolType": "[steps('hostPool').hostPoolType]",
				"WorkspaceName": "[steps('hostPool').WorkspaceName]",
				"Location": "[steps('basics').resourceScope.location.name]",
				"NewLogAnalyticsWS": "[if(equals(steps('monitoring').deployMonitoring, true), steps('monitoring').deployMonitoringAlaWorkspace, false)]",
				"LogAnalyticsWorkspaceRetention": "[if(equals(steps('monitoring').deployMonitoringAlaWorkspace, true), steps('monitoring').deployMonitoringNewAlaWorkspaceRetention, 0)]",
				"LogAnalyticsWorkspaceSku": "[steps('monitoring').LogAnalyticsWorkspaceSku]",
				"LogAnalyticsResourceId": "[if(equals(steps('monitoring').deployMonitoringAlaWorkspace, false), steps('monitoring').alaWorkspaceExistingWorkspacesSelection.id, 'none')]",
				"LogAnalyticsWorkspaceName": "[if(equals(steps('monitoring').deployMonitoringAlaWorkspace, false), steps('monitoring').alaWorkspaceExistingWorkspacesSelection.id, 'none')]",
				"Monitoring": "[steps('monitoring').deployMonitoring]",
				"NumSessionHosts": "[steps('hostPool').NumSessionHosts]",
				"NumUsersPerHost": "[steps('hostPool').hostPoolPooled.NumUsersPerHost]",
				"Subnet": "[steps('networking').subnet.name]",
				"Tags": "[steps('basics').Tags]",
				"Timestamp": "[steps('basics').Timestamp]",
				"UpdateWindows": "[steps('hostInfo').UpdateWindows]",
				"StartVmOnConnect": "[steps('hostPool').StartVmOnConnect]",
				"OUPath": "[steps('hostInfo').OUPath]",
				"VmIndexStart": "[steps('hostInfo').VmIndexStart]",
				"VmPrefix": "[steps('hostInfo').VmPrefix]",
				"ValidationEnvironment": "[steps('hostPool').ValidationEnvironment]",
				"VirtualNetwork": "[steps('networking').virtualNetworkSelection.name]",
				"VirtualNetworkResourceGroup": "[steps('networking').virtualNetworkSelection.resourceGroup]",
				"VmPassword": "[steps('hostInfo').VmPassword]",
				"VmSize": "[steps('hostInfo').VmSize]",
				"VmUsername": "[steps('hostInfo').VmUsername]"
			},
			"kind": "Subscription",
			"location": "[equals('New', steps('basics').resourceScope.resourceGroup.modeName)]",
			"subscriptionId": "[steps('basics').resourceScope.subscriptionGroup.id]"
		}
	}
}